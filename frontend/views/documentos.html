<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">
  <link href="/public/css/styles.css" rel="stylesheet">
  <title>Documentos Públicos</title>
  <style>
    .pagination {
      display: flex;
      justify-content: center;
      margin-top: 20px;
    }
  </style>
</head>
<body>
  <header class="bg-dark text-white text-center py-3">
    <h4>Documentos Públicos</h4>
  </header>

  <nav class="navbar navbar-expand-lg navbar-light bg-light">
    <button class="btn btn-secondary" onclick="location.href='admin.html'">Volver</button>
    <div class="ml-auto d-flex">
      <input type="search" id="documentSearch" class="form-control" placeholder="Buscar documentos">
      <button class="btn btn-secondary ml-2" onclick="filterDocuments()">Buscar</button>
    </div>
  </nav>

  <div class="container">
    <h5 class="mt-3">Documentos Públicos</h5>
    <table class="table table-hover mt-3">
      <thead class="thead-light">
        <tr>
          <th>ID</th>
          <th>Título</th>
          <th>Descripción</th>
          <th>Archivo</th>
          <th>Fecha de Publicación</th>
        </tr>
      </thead>
      <tbody id="documentTable">
        <!-- Contenido generado dinámicamente -->
      </tbody>
    </table>
    <div class="pagination">
      <button class="btn btn-secondary" onclick="prevPage()">Anterior</button>
      <span id="currentPage" class="mx-2">1</span>
      <button class="btn btn-secondary" onclick="nextPage()">Siguiente</button>
    </div>
  </div>

  <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.5.3/dist/umd/popper.min.js"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
  <script>
    document.addEventListener('DOMContentLoaded', fetchDocuments);

    function fetchDocuments() {
      fetch('http://localhost:3000/documents')
        .then(response => response.json())
        .then(documents => {
          const tableBody = document.getElementById('documentTable');
          tableBody.innerHTML = '';
          documents.forEach(doc => {
            const row = document.createElement('tr');
            row.innerHTML = `
              <td>${doc._id}</td>
              <td>${doc.title}</td>
              <td>${doc.description}</td>
              <td><a href="${doc.filePath}" target="_blank">Ver Documento</a></td>
              <td>${new Date(doc.createdAt).toLocaleDateString()}</td>
            `;
            tableBody.appendChild(row);
          });
        })
        .catch(error => console.error('Error fetching documents:', error));
    }

    function filterDocuments() {
      const searchInput = document.getElementById('documentSearch').value.toLowerCase();
      const tableRows = document.querySelectorAll('#documentTable tr');
      tableRows.forEach(row => {
        const cells = row.getElementsByTagName('td');
        let found = false;
        for (let i = 0; i < cells.length; i++) {
          if (cells[i].innerText.toLowerCase().includes(searchInput)) {
            found = true;
            break;
          }
        }
        if (found) {
          row.style.display = '';
        } else {
          row.style.display = 'none';
        }
      });
    }

    function prevPage() {
      // Implementación de la lógica de paginación
    }

    function nextPage() {
      // Implementación de la lógica de paginación
    }
  </script>
</body>
</html>

